<html>

<head>
    <link type="text/css" href="csworks/csworks.plumbing.css" rel="stylesheet" />
    <link type="text/css" href="css/morris.css" rel="stylesheet" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">
        window.jQuery || document.write("\x3Cscript src='/js/jquery-1.10.2.min.js'>\x3C/script>");
    </script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js"></script>
    <script>
        window.ko || document.write('\x3Cscript src="/js/knockout-2.3.0.min.js">\x3C/script>')
    </script>
    <script type="text/javascript" src="csworks/csworks.core.fake.js"></script>
    <script type="text/javascript" src="csworks/csworks.templates.js"></script>

    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.2/raphael-min.js"></script>
    <script>
        window.Raphael || document.write('\x3Cscript src="/js/raphael-2.1.2.min.js">\x3C/script>')
    </script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/morris.js/0.4.2/morris.min.js"></script>
    <script>
        window.Morris || document.write('\x3Cscript src="/js/morris-0.4.2.min.js">\x3C/script>')
    </script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>
    <script>
        window.moment || document.write('\x3Cscript src="/js/moment-2.1.0.min.js">\x3C/script>')
    </script>
    <style type="text/css">
        div.round-corners {
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            -o-border-radius: 10px;
            -ms-border-radius: 10px;
            -khtml-border-radius: 10px;
            border-radius: 10px;
        }

        text.normalFont {
            font-family: Lucida Sans Unicode;
            font-size: 24px;
            font-weight: normal;
            fill: #114966;
            cursor: default;
        }

        text.largeFont {
            font-family: Lucida Sans Unicode;
            font-size: 36px;
            font-weight: normal;
            fill: #114966;
            cursor: default;
        }

        text.smallFont {
            font-family: Lucida Sans Unicode;
            font-size: 16px;
            font-weight: normal;
            fill: #114966;
            cursor: default;
        }

        text.errorFont {
            font-family: Lucida Sans Unicode;
            font-size: 16px;
            font-weight: normal;
            fill: #FF0000;
        }

        .pump {}

        .tank-cutaway {
            pointer-events: none;
        }
    </style>
</head>

<body>
    <script type="text/javascript">
        if ($.browser && $.browser.msie) {
            alert("You are using Internet Explorer. Unfortunately, it does not support some SVG features used by CSWorks. Consider using other browsers: Chrome, Firefox, Opera, Safari. Sorry for the inconvenience.");
        }
        // Load templates dynamically. You don't have to do that if you are ok with including all required templates into your html code.
        loadTemplates([
            "plumbing-horizontal-pipe",
            "plumbing-vertical-pipe",
            "plumbing-top-valve",
            "plumbing-bottom-valve",
            "plumbing-right-valve",
            "plumbing-left-valve",
            "plumbing-crosspipe",
            "plumbing-top-tway",
            "plumbing-bottom-tway",
            "plumbing-right-tway",
            "plumbing-left-tway",
            "plumbing-left-top-elbow",
            "plumbing-right-top-elbow",
            "plumbing-left-bottom-elbow",
            "plumbing-right-bottom-elbow",
            "plumbing-vertical-tank",
            "plumbing-horizontal-tank",
            "plumbing-cutaway",
            "plumbing-pump",
            "plumbing-pipe-end-bottom",
            "plumbing-pipe-end-top",
            "plumbing-pipe-end-right",
            "plumbing-pipe-end-left",
            "plumbing-vertical-rotor",
            "plumbing-horizontal-rotor"
        ]);
    </script>
    <script id="plumbing-horizontal-pipe" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'horPipe'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'pipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'fillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='0%' y='30%' width='100%' height='40%' data-bind="fillResId: 'pipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='0%' y='40%'   width='100%' height='20%' data-bind="fillResId: 'fillGrad'" ></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-vertical-pipe" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'vertPipe'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'pipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'fillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='30%' y='0%' width='40%' height='100%' data-bind="fillResId: 'pipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='40%' y='0%'   width='20%' height='100%' data-bind="fillResId: 'fillGrad'"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-top-valve" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'topValve'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>

        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='45%' y='25%' rx='0%' ry='0%' width='10%' height='50%' data-bind="fillResId: 'vertPipeGrad'"></rect>
          <path d="M44,40 L56,38 M44,45 L56,43 M44,50 L56,48 M44,55 L56,53 M44,60 L56,58 M44,65 L56,63 M44,70 L56,68 M44,75 L56,73 " data-bind="attr: {'stroke': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" stroke-width="2" opacity="0.7"></path>
          <rect x='5%' y='5%' rx='10%' ry='10%' width='90%' height='20%' data-bind="fillResId: 'horPipeGrad'"></rect>
        </g>
        <rect x='25%' y='95%' rx='0' ry='0' width='50%' height='5%' data-bind="fillResId: 'vertPipeGrad'"></rect>/>
        <rect  x='30%' y='75%' rx='5%' ry='5%' width='40%' height='20%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'none' : 'block'}">
          <rect x='45%' y='60%' rx='0%' ry='0%' width='10%' height='15%' data-bind="fillResId: 'vertPipeGrad'"></rect>
          <rect x='5%' y='40%' rx='10%' ry='10%' width='90%' height='20%' data-bind="fillResId: 'horPipeGrad'"></rect>
          <circle cx='50%' cy='50%' r='25%' class='valveStopSignBackground' ></circle>
          <circle cx='50%' cy='50%' r='22%' class='valveStopSignBorder'></circle>
          <rect  x='35%' y='45%' rx='0%' ry='0%' width='30%' height='10%' class='valveStopSignBrick' ></rect>
        </g>
        <g data-bind="style: { display: hasFocus() ? 'block' : 'none'}">
          <circle cx="50%" cy="50%" r="10%" class="crossHair"></circle>
          <circle cx="50%" cy="50%" r="5%" class="crossHair"></circle>
          <rect x="5%" y="5%" width="90%" height="90%" rx="5%" ry="5%" class="crossHair"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-bottom-valve" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'bottomValve'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>

        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='45%' y='25%' rx='0%' ry='0%' width='10%' height='50%' data-bind="fillResId: 'vertPipeGrad'"></rect>
          <path d="M44,60 L56,58 M44,55 L56,53 M44,50 L56,48 M44,45 L56,43 M44,40 L56,38 M44,35 L56,33 M44,30 L56,28 M44,25 L56,23" data-bind="attr: {'stroke': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" stroke-width="2" opacity="0.7"></path>
          <rect x='5%' y='75%' rx='10%' ry='10%' width='90%' height='20%' data-bind="fillResId: 'horPipeGrad'"></rect>
        </g>
        <rect x='25%' y='0%' rx='0' ry='0' width='50%' height='5%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <rect  x='30%' y='5%' rx='5%' ry='5%' width='40%' height='20%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'none' : 'block'}">
          <rect x='45%' y='25%' rx='0%' ry='0%' width='10%' height='15%' data-bind="fillResId: 'vertPipeGrad'"></rect>
          <rect x='5%' y='40%' rx='10%' ry='10%' width='90%' height='20%' data-bind="fillResId: 'horPipeGrad'"></rect>
          <circle cx='50%' cy='50%' r='25%' class='valveStopSignBackground' ></circle>
          <circle cx='50%' cy='50%' r='22%' class='valveStopSignBorder'></circle>
          <rect  x='35%' y='45%' rx='0%' ry='0%' width='30%' height='10%' class='valveStopSignBrick' ></rect>
        </g>
        <g data-bind="style: { display: hasFocus() ? 'block' : 'none'}">
          <circle cx="50%" cy="50%" r="10%" class="crossHair"></circle>
          <circle cx="50%" cy="50%" r="5%" class="crossHair"></circle>
          <rect x="5%" y="5%" width="90%" height="90%" rx="5%" ry="5%" class="crossHair"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-right-valve" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'rightValve'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>

        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='25%' y='45%' rx='0%' ry='0%' width='50%' height='10%' data-bind="fillResId: 'horPipeGrad'"></rect>
          <path d="M58,44 L60,56 M53,44 L55,56 M48,44 L50,56 M43,44 L45,56 M38,44 L40,56 M33,44 L35,56 M28,44 L30,56 M23,44 L25,56 " data-bind="attr: {'stroke': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" stroke-width="2" opacity="0.7"></path>
          <rect x='75%' y='5%' rx='10%' ry='10%' width='20%' height='90%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        </g>
        <rect x='0%' y='25%' rx='0' ry='0' width='5%' height='50%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <rect  x='5%' y='30%' rx='5%' ry='5%' width='20%' height='40%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'none' : 'block'}">
          <rect x='25%' y='45%' rx='0%' ry='0%' width='15%' height='10%' data-bind="fillResId: 'horPipeGrad'"></rect>
          <rect x='40%' y='5%' rx='10%' ry='10%' width='20%' height='90%' data-bind="fillResId: 'vertPipeGrad'"></rect>
          <circle cx='50%' cy='50%' r='25%' class='valveStopSignBackground' ></circle>
          <circle cx='50%' cy='50%' r='22%' class='valveStopSignBorder'></circle>
          <rect  x='35%' y='45%' rx='0%' ry='0%' width='30%' height='10%' class='valveStopSignBrick' ></rect>
        </g>
        <g data-bind="style: { display: hasFocus() ? 'block' : 'none'}">
          <circle cx="50%" cy="50%" r="10%" class="crossHair"></circle>
          <circle cx="50%" cy="50%" r="5%" class="crossHair"></circle>
          <rect x="5%" y="5%" width="90%" height="90%" rx="5%" ry="5%" class="crossHair"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-left-valve" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'leftValve'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>

        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='25%' y='45%' rx='0%' ry='0%' width='50%' height='10%' data-bind="fillResId: 'horPipeGrad'"></rect>
          <path d="M40,44 L42,56 M45,44 L47,56 M50,44 L52,56 M55,44 L57,56 M60,44 L62,56 M65,44 L67,56 M70,44 L72,56 M75,44 L77,56 " data-bind="attr: {'stroke': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" stroke-width="2" opacity="0.7"></path>
          <rect x='5%' y='5%' rx='10%' ry='10%' width='20%' height='90%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        </g>
        <rect x='95%' y='25%' rx='0' ry='0' width='5%' height='50%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <rect  x='75%' y='30%' rx='5%' ry='5%' width='20%' height='40%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'none' : 'block'}">
          <rect x='60%' y='45%' rx='0%' ry='0%' width='15%' height='10%' data-bind="fillResId: 'horPipeGrad'"></rect>
          <rect x='40%' y='5%' rx='10%' ry='10%' width='20%' height='90%' data-bind="fillResId: 'vertPipeGrad'"></rect>
          <circle cx='50%' cy='50%' r='25%' class='valveStopSignBackground' ></circle>
          <circle cx='50%' cy='50%' r='22%' class='valveStopSignBorder'></circle>
          <rect  x='35%' y='45%' rx='0%' ry='0%' width='30%' height='10%' class='valveStopSignBrick' ></rect>
        </g>
        <g data-bind="style: { display: hasFocus() ? 'block' : 'none'}">
          <circle cx="50%" cy="50%" r="10%" class="crossHair"></circle>
          <circle cx="50%" cy="50%" r="5%" class="crossHair"></circle>
          <rect x="5%" y="5%" width="90%" height="90%" rx="5%" ry="5%" class="crossHair"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-crosspipe" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'crossPipe'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'horFillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertFillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='30%' y='0%' width='40%' height='100%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <path d="M0,30 L30,30 L50,50 L30,70 L0,70 Z" data-bind="fillResId: 'horPipeGrad'"></path>
        <path d="M100,30 L70,30 L50,50 L70,70 L100,70 Z" data-bind="fillResId: 'horPipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='40%' y='0%' width='20%' height='100%' data-bind="fillResId: 'vertFillGrad'" ></rect>
          <path d="M0,40 L40,40 L50,50 L40,60 L0,60 Z" data-bind="fillResId: 'horFillGrad'"></path>
          <path d="M100,40 L60,40 L50,50 L60,60 L100,60 Z" data-bind="fillResId: 'horFillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-top-tway" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'topTway'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'horFillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertFillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='0%' y='30%' width='100%' height='40%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <path d="M30,0 L30,30 L50,50 L70,30 L70,0 Z" data-bind="fillResId: 'vertPipeGrad'"></path>/>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='0%' y='40%'   width='100%' height='20%' data-bind="fillResId: 'horFillGrad'"></rect> />
          <path d="M40,0 L40,40 L50,50 L60,40 L60,0 Z" data-bind="fillResId: 'vertFillGrad'"></path>/>
        </g>
      </svg>
    </script>
    <script id="plumbing-bottom-tway" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'bottomTway'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'horFillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertFillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='0%' y='30%'   width='100%' height='40%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <path d="M30,100 L30,70 L50,50 L70,70 L70,100 Z" data-bind="fillResId: 'vertPipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='0%' y='40%'   width='100%' height='20%' data-bind="fillResId: 'horFillGrad'" ></rect>
          <path d="M40,100 L40,60 L50,50 L60,60 L60,100 Z" data-bind="fillResId: 'vertFillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-right-tway" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'rightTway'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'horFillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertFillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='30%' y='0%' width='40%' height='100%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <path d="M100,30 L70,30 L50,50 L70,70 L100,70 Z" data-bind="fillResId: 'horPipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='40%' y='0%' width='20%' height='100%' data-bind="fillResId: 'vertFillGrad'"></rect>
          <path d="M100,40 L60,40 L50,50 L60,60 L100,60 Z" data-bind="fillResId: 'horFillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-left-tway" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'leftTway'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'horFillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'vertFillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <rect x='30%' y='0%' width='40%' height='100%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <path d="M0,30 L30,30 L50,50 L30,70 L0,70 Z" data-bind="fillResId: 'horPipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='40%' y='0%' width='20%' height='100%' data-bind="fillResId: 'vertFillGrad'" ></rect>
          <path d="M0,40 L40,40 L50,50 L40,60 L0,60 Z" data-bind="fillResId: 'horFillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-left-top-elbow" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'leftTopElbow'" viewBox="0 0 100 100">
        <radialGradient data-bind="resId: 'pipeGrad'" cx="0" cy="0" r="150%" fx="0" fy="0" >
          <stop  offset='20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='39%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='65%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <radialGradient data-bind="resId: 'fillGrad'" cx="0" cy="0" r="150%" fx="0" fy="0" >
          <stop  offset='30%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='65%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='100%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </radialGradient>
        <path d="M0,30 A30,30 0 0 0 30,0 L70,0 A70,70 0 0 1 0,70 Z" data-bind="fillResId: 'pipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <path d="M0,40 A40,40 0 0 0 40,0 L60,0 A60,60 0 0 1 0,60 Z" data-bind="fillResId: 'fillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-right-top-elbow" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'rightTopElbow'" viewBox="0 0 100 100">
        <radialGradient data-bind="resId: 'pipeGrad'" cx="100%" cy="-52%" r="158%" fx="100%" fy="0" gradientUnits='objectBoundingBox'>
          <stop  offset='32%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='56%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='92%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <radialGradient data-bind="resId: 'fillGrad'" cx="115%" cy="10%" r="150%" fx="115%" fy="10%" >
          <stop  offset='32%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='55%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='90%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </radialGradient>
        <path d="M70,0 A30,30 0 0 0 100,30 L100,70 A70,70 0 0 1 30,0 Z" data-bind="fillResId: 'pipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <path d="M60,0 A40,40 0 0 0 100,40 L100,60 A60,60 0 0 1 40,0 Z" data-bind="fillResId: 'fillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-left-bottom-elbow" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'leftBottomElbow'" viewBox="0 0 100 100">
        <radialGradient data-bind="resId: 'pipeGrad'" cx="-15%" cy="90%" r="150%" fx="-15%" fy="90%" >
          <stop  offset='25%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='50%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='75%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <radialGradient data-bind="resId: 'fillGrad'" cx="15%" cy="110%" r="150%" fx="15%" fy="110%" >
          <stop  offset='35%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='55%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='80%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </radialGradient>
        <path d="M0,70 A30,30 0 0 1 30,100 L70,100 A70,70 0 0 0 0,30 Z" data-bind="fillResId: 'pipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <path d="M0,60 A40,40 0 0 1 40,100 L60,100 A60,60 0 0 0 0,40 Z" data-bind="fillResId: 'fillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-right-bottom-elbow" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'rightBottomElbow'" viewBox="0 0 100 100">
        <radialGradient data-bind="resId: 'pipeGrad'" cx="100%" cy="100%" r="150%" fx="100%" fy="100%" >
          <stop  offset='30%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='56%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='75%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <radialGradient data-bind="resId: 'fillGrad'" cx="100%" cy="100%" r="150%" fx="100%" fy="100%" >
          <stop  offset='30%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='42%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </radialGradient>
        <path d="M100,70 A30,30 0 0 0 70,100 L30,100 A70,70 0 0 1 100,30 Z" data-bind="fillResId: 'pipeGrad'"></path>
        <g data-bind="style: { display: typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <path d="M100,60 A40,40 0 0 0 60,100 L40,100 A60,60 0 0 1 100,40 Z" data-bind="fillResId: 'fillGrad'"></path>
        </g>
      </svg>
    </script>
    <script id="plumbing-vertical-tank" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'vertTank'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'vertPipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <radialGradient data-bind="resId: 'topPipeGrad'" cx="0%" cy="10%" r="150%" fx="30%" fy="30%" >
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset=' 0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='150%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <radialGradient data-bind="resId: 'bottomPipeGrad'" cx="-10%" cy="-30%" r="120%" fx="-10%" fy="-30%" >
          <stop  offset='-200%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <!-- Body -->
        <rect x='3%' y='10%' width='94%' height='80%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <!-- Half spheres -->
        <path d="M3,10 A105,90 0 0 1 97,10  Z" data-bind="fillResId: 'topPipeGrad'"></path>
        <path d="M3,90 A105,90 0 0 0 97,90  Z" data-bind="fillResId: 'bottomPipeGrad'"></path>
        <!-- Gaskets -->
        <rect x='0%' y='10%' rx="1%" ry="1%" width='100%' height='3%' data-bind="fillResId: 'vertPipeGrad'"></rect>
        <rect x='0%' y='87%' rx="1%" ry="1%" width='100%' height='3%' data-bind="fillResId: 'vertPipeGrad'"></rect>
      </svg>
    </script>
    <script id="plumbing-horizontal-tank" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'horTank'" preserveAspectRatio="xMinYMin meet" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'horPipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <radialGradient data-bind="resId: 'leftPipeGrad'" cx="20%" cy="20%" r="130%" fx="30%" fy="30%" >
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset=' 0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <radialGradient data-bind="resId: 'rightPipeGrad'" cx="-10%" cy="-30%" r="120%" fx="-10%" fy="-30%" >
          <stop  offset='-200%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </radialGradient>
        <!-- Body -->
        <rect x='10%' y='3%' width='80%' height='94%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <!-- Half spheres -->
        <path d="M10,3 A90,105 0 0 0 10,97  Z" data-bind="fillResId: 'leftPipeGrad'"></path>
        <path d="M90,3 A90,105 0 0 1 90,97  Z" data-bind="fillResId: 'rightPipeGrad'"></path>
        <!-- Gaskets -->
        <rect x='10%' y='0%' rx="1%" ry="1%" width='3%' height='100%' data-bind="fillResId: 'horPipeGrad'"></rect>
        <rect x='87%' y='0%' rx="1%" ry="1%" width='3%' height='100%' data-bind="fillResId: 'horPipeGrad'"></rect>
      </svg>
    </script>
    <script id="plumbing-cutaway" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'cutaway'" preserveAspectRatio="xMinYMin meet" viewBox="0 0 100 100">
        <radialGradient data-bind="resId: 'internalGrad'" cx="70%" cy="70%" r="80%" fx="70%" fy="70%">
          <stop  offset='-100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
        </radialGradient>
        <radialGradient data-bind="resId: 'fillGrad'" cx="70%" cy="70%" r="150%" fx="70%" fy="70%" >
          <stop  offset='-150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </radialGradient>
        <clipPath data-bind="resId: 'clipPath'">
          <rect x="15%" y="15%" width="70%" data-bind="attr: { height: (typeof value != 'undefined' && !isNaN(value())? (value() < 0.0 ? 100.0 : (value() >= 100.0 ? 0.0 : 100.0 - value() ) ) : 100.0) / 100.0 * 70.0 + '%' }"/>
        </clipPath>
        <path d="M75,15 L85,25 L75,35 L85,45 L75,55 L85,65 L75,75 L85,85     L25,85   L15,75 L25,65 L15,55 L25,45 L15,35 L25,25 L15,15 Z" data-bind="fillResId: 'fillGrad'" ></path>
        <path d="M75,15 L85,25 L75,35 L85,45 L75,55 L85,65 L75,75 L85,85     L25,85   L15,75 L25,65 L15,55 L25,45 L15,35 L25,25 L15,15 Z" data-bind="fillResId: 'internalGrad', clipPathResId: 'clipPath'">
      </svg>
    </script>
    <script id="plumbing-pump" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'pump'" preserveAspectRatio="xMinYMin meet" viewBox="0 0 200 200">
        <radialGradient data-bind="resId: 'pipeGrad'" cx="30%" cy="30%" r="100%" fx="30%" fy="30%">
          <stop  offset='-100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
        </radialGradient>
        <radialGradient data-bind="resId: 'internalGrad'" cx="70%" cy="70%" r="80%" fx="70%" fy="70%">
          <stop  offset='-100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
        </radialGradient>
        <radialGradient data-bind="resId: 'fillGrad'" cx="70%" cy="70%" r="150%" fx="70%" fy="70%" >
          <stop  offset='-150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='0%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </radialGradient>
        <circle cx="50%" cy="50%" r="50%" data-bind="fillResId: 'pipeGrad'" ></circle>
        <circle cx="50%" cy="50%" r="35%" data-bind="fillResId: 'internalGrad'" ></circle>
        <g data-bind="style: { display: typeof value != 'undefined' && (!isNaN(parseFloat(value())) && parseFloat(value()) > 0 || (typeof value() === 'boolean' && value())) ? 'block' : 'none'}">
          <circle cx="50%" cy="50%" r="35%" data-bind="fillResId: 'fillGrad'" ></circle>
        </g>
        <g>
          <path transform="translate(100, 100)" d="m 55.842,-4.497 1.402,-0.113 3.741,0.613 5.198,2.175 0,3.644 -5.198,2.175 -3.741,0.613 -1.402,-0.113 -0.739,5.612 1.384,0.254 3.454,1.56 4.459,3.447 -0.943,3.519 -5.585,0.756 -3.771,-0.376 -1.326,-0.473 -2.166,5.231 1.271,0.603 2.933,2.401 3.414,4.483 -1.821,3.156 -5.59,-0.716 -3.546,-1.34 -1.158,-0.799 -3.446,4.491 1.072,0.912 2.211,3.078 2.138,5.214 -2.577,2.577 -5.214,-2.138 -3.078,-2.211 -0.912,-1.072 -4.491,3.446 0.799,1.158 1.34,3.546 0.716,5.59 -3.156,1.821 -4.483,-3.414 -2.401,-2.933 -0.603,-1.271 -5.231,2.166 0.473,1.326 0.376,3.771 -0.756,5.585 -3.519,0.943 -3.447,-4.459 -1.56,-3.454 -0.254,-1.384 -5.612,0.739 0.113,1.402 -0.613,3.741 -2.175,5.198 -3.644,0 -2.175,-5.198 -0.613,-3.741 0.113,-1.402 -5.612,-0.739 -0.254,1.384 -1.56,3.454 -3.447,4.459 -3.519,-0.943 -0.756,-5.585 0.376,-3.771 0.473,-1.326 -5.231,-2.166 -0.603,1.271 -2.401,2.933 -4.483,3.414 -3.156,-1.821 0.716,-5.59 1.34,-3.546 0.799,-1.158 -4.491,-3.446 -0.912,1.072 -3.078,2.211 -5.214,2.138 -2.577,-2.577 2.138,-5.214 2.211,-3.078 1.072,-0.912 -3.446,-4.491 -1.158,0.799 -3.546,1.34 -5.59,0.716 -1.821,-3.156 3.414,-4.483 2.933,-2.401 1.271,-0.603 -2.166,-5.231 -1.326,0.473 -3.771,0.376 -5.585,-0.756 -0.943,-3.519 4.459,-3.447 3.454,-1.56 1.384,-0.254 -0.739,-5.612 -1.402,0.113 -3.741,-0.613 -5.198,-2.175 0,-3.644 5.198,-2.175 3.741,-0.613 1.402,0.113 0.739,-5.612 -1.384,-0.254 -3.454,-1.56 -4.459,-3.447 0.943,-3.519 5.585,-0.756 3.771,0.376 1.326,0.473 2.166,-5.231 -1.271,-0.603 -2.933,-2.401 -3.414,-4.483 1.821,-3.156 5.59,0.716 3.546,1.34 1.158,0.799 3.446,-4.491 -1.072,-0.912 -2.211,-3.078 -2.138,-5.214 2.577,-2.577 5.214,2.138 3.078,2.211 0.912,1.072 4.491,-3.446 -0.799,-1.158 -1.34,-3.546 -0.716,-5.59 3.156,-1.821 4.483,3.414 2.401,2.933 0.603,1.271 5.231,-2.166 -0.473,-1.326 -0.376,-3.771 0.756,-5.585 3.519,-0.943 3.447,4.459 1.56,3.454 0.254,1.384 5.612,-0.739 -0.113,-1.402 0.613,-3.741 2.175,-5.198 3.644,0 2.175,5.198 0.613,3.741 -0.113,1.402 5.612,0.739 0.254,-1.384 1.56,-3.454 3.447,-4.459 3.519,0.943 0.756,5.585 -0.376,3.771 -0.473,1.326 5.231,2.166 0.603,-1.271 2.401,-2.933 4.483,-3.414 3.156,1.821 -0.716,5.59 -1.34,3.546 -0.799,1.158 4.491,3.446 0.912,-1.072 3.078,-2.211 5.214,-2.138 2.577,2.577 -2.138,5.214 -2.211,3.078 -1.072,0.912 3.446,4.491 1.158,-0.799 3.546,-1.34 5.59,-0.716 1.821,3.156 -3.414,4.483 -2.933,2.401 -1.271,0.603 2.166,5.231 1.326,-0.473 3.771,-0.376 5.585,0.756 0.943,3.519 -4.459,3.447 -3.454,1.56 -1.384,0.254 z" data-bind="fillResId: 'pipeGrad'"></path>
          <!-- ko if: typeof value != 'undefined' && (!isNaN(parseFloat(value())) && parseFloat(value()) > 0 || (typeof value() === 'boolean' && value())) -->
          <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 100 100" to="360 100 100" dur="4s" repeatCount="indefinite"></animateTransform>
          <!-- /ko -->
        </g>
      </svg>
    </script>
    <script id="plumbing-pipe-end-bottom" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'pipeEndBottom'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'pipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'fillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <circle cx='50%' cy='20%' r='20%' data-bind="fillResId: 'pipeGrad'"></circle>
        <rect x='30%' y='20%' width='40%' height='80%' data-bind="fillResId: 'pipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='40%' y='20%' width='20%' height='80%' data-bind="fillResId: 'fillGrad'"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-pipe-end-top" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'pipeEndTop'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'pipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient  data-bind="resId: 'fillGrad'" x1='-50%' y1='0%' x2='150%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <circle cx='50%' cy='80%' r='20%' data-bind="fillResId: 'pipeGrad'"></circle>
        <rect x='30%' y='0%' width='40%' height='80%' data-bind="fillResId: 'pipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='40%' y='0%' width='20%' height='80%' data-bind="fillResId: 'fillGrad'"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-pipe-end-right" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'pipeEndRight'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'pipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'fillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <circle cx='20%' cy='50%' r='20%' data-bind="fillResId: 'pipeGrad'"></circle>
        <rect x='20%' y='30%' width='80%' height='40%' data-bind="fillResId: 'pipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='20%' y='40%' width='80%' height='20%' data-bind="fillResId: 'fillGrad'"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-pipe-end-left" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'pipeEndLeft'" viewBox="0 0 100 100">
        <linearGradient data-bind="resId: 'pipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop  offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>
          <stop  offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}"></stop>
          <stop  offset='100%'  data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}"></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'fillGrad'" x1='0%' y1='-50%' x2='0%' y2='150%' gradientUnits='objectBoundingBox'>
          <stop  offset='-50%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
          <stop  offset='75%' data-bind="attr: {'stop-color': (typeof fillColor === 'undefined' ? '#0000FF': fillColor())}"></stop>
          <stop  offset='150%' data-bind="attr: {'stop-color': (typeof fillColorLight === 'undefined' ? '#FFFFFF': fillColorLight())}"></stop>
        </linearGradient>
        <circle cx='80%' cy='50%' r='20%' data-bind="fillResId: 'pipeGrad'"></circle>
        <rect x='0%' y='30%' width='80%' height='40%' data-bind="fillResId: 'pipeGrad'"></rect>
        <g data-bind="style: { display: typeof value != 'undefined' && typeof value != 'undefined' && value() ? 'block' : 'none'}">
          <rect x='0%' y='40%' width='80%' height='20%' data-bind="fillResId: 'fillGrad'"></rect>
        </g>
      </svg>
    </script>
    <script id="plumbing-vertical-rotor" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'vertRotor'" preserveAspectRatio="xMinYMin meet" viewBox="0 0 100 20">
        <linearGradient data-bind="resId: 'pipeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
        <stop offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>
        <stop offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}" ></stop>
        <stop offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>/>
      </linearGradient>
        <linearGradient data-bind="resId: 'bladeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
        <stop offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>
        <stop offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}" ></stop>
        <stop offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>/>
      </linearGradient>
        <rect x='45%' y='50%' width='10%' height='50%' data-bind="fillResId: 'pipeGrad'" ></rect>
        <g transform="scale(1,0.2) translate(0,40)">
            <rect x='0%' y='20%' width='100%' height='60%' rx="20" ry="20" data-bind="fillResId: 'bladeGrad'">
                <!-- ko if: typeof value != 'undefined' && (!isNaN(parseFloat(value())) && parseFloat(value()) > 0 || (typeof value() === 'boolean' && value())) -->
                <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 50 10" to="360 50 10" dur="4s" repeatCount="indefinite" ></animateTransform>
                <!-- /ko -->
            </rect>
        </g>
        <rect x='45%' y='0%' width='10%' height='50%' data-bind="fillResId: 'pipeGrad'" ></rect>
    </svg>
    </script>
    <script id="plumbing-horizontal-rotor" type="text/html">
      <svg width='100%' height='100%' data-bind="ctrlId: 'horRotor'" preserveAspectRatio="xMinYMin meet" viewBox="0 0 20 100">
        <linearGradient data-bind="resId: 'pipeGrad'" y1='-20%' x1='0%' y2='100%' x2='0%' gradientUnits='objectBoundingBox'>
          <stop offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>
          <stop offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}" ></stop>
          <stop offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>/>
        </linearGradient>
        <linearGradient data-bind="resId: 'bladeGrad'" x1='-20%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox'>
          <stop offset='-20%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>
          <stop offset='40%' data-bind="attr: {'stop-color': (typeof bodyColorLight === 'undefined' ? '#D0D0D0': bodyColorLight())}" ></stop>
          <stop offset='100%' data-bind="attr: {'stop-color': (typeof bodyColor === 'undefined' ? '#303030': bodyColor())}" ></stop>/>
        </linearGradient>
          <rect y='45%' x='50%' height='10%' width='50%' data-bind="fillResId: 'pipeGrad'" ></rect>
          <g transform="scale(0.2,1) translate(40,0)">
              <rect y='0%' x='20%' height='100%' width='60%' rx="20" ry="20" data-bind="fillResId: 'bladeGrad'">
                  <!-- ko if: typeof value != 'undefined' && (!isNaN(parseFloat(value())) && parseFloat(value()) > 0 || (typeof value() === 'boolean' && value())) -->
                  <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 10 50" to="360 10 50" dur="4s" repeatCount="indefinite" ></animateTransform>
                  <!-- /ko -->
              </rect>
          </g>
          <rect y='45%' x='0%' width='50%' height='10%' data-bind="fillResId: 'pipeGrad'" ></rect>
      </svg>
    </script>
    <!-- Page html/svg layout -->
    <div style="display: block; position: absolute; width: 100%; height: 100%; background: #FFFFFF;">
        <!-- We want this screen to scale according to the window size, preserving the aspect ratio -->
        <svg style="display: block; position: absolute; width: 100%; height: 100%;top:0;" width="100%" height="100%" preserveaspectratio="xMidYMid meet" viewbox="0 0 1920 1080">
      <!-- Intake pipes -->

      <svg x="100" y="10" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-pipe', data: intake1 }" />
      <svg x="300" y="10" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-pipe', data: intake2 }" />
      <svg x="1400" y="10" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-pipe', data: intake3 }" />
      <svg x="1600" y="10" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-pipe', data: intake4 }" />

      <!-- Like all other plumbing controls that use viewBox, tanks have predefined (1:1) width-height ratio. Use transforms to stretch/squeeze them. Mind the x,y coordinates - they are transformed as well! -->

      <g transform="scale(2,4)">
        <svg x="25" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-tank'}" class="tank" />
        <svg x="25" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-cutaway', data: tank1}" class="tank-cutaway" />
        <svg x="125" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-tank'} " class="tank" />
        <svg x="125" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-cutaway', data: tank2} " class="tank-cutaway" />
        <!-- Tanks 3 and 4 are not bound to data, but we have to provide custom colors for them. Bind them to static objects. -->
        <svg x="675" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-tank', data: staticRedTank}" class="tank" />
        <svg x="675" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-cutaway', data: tank3}" class="tank-cutaway" />
        <svg x="775" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-tank', data: staticRedTank} " class="tank" />
        <svg x="775" y="26" width="100" height="100" data-bind="template: { name: 'plumbing-cutaway', data: tank4} " class="tank-cutaway" />
      </g>

      <!-- Tank fill displays: bold when 100% -->

      <rect x="100" y="275" width="100" height="50" rx="5" ry="5" fill="#FFFFFF" style="opacity: 0.9" />
      <text x='150' y="310" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: tank1.value() + '%', style: {'font-weight': (tank1.value() >= 100.0 ? 'bold' : 'normal')}"></text>
      <rect x="300" y="275" width="100" height="50" rx="5" ry="5" fill="#FFFFFF" style="opacity: 0.9" />
      <text x='350' y="310" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: tank2.value() + '%', style: {'font-weight': (tank2.value() >= 100.0 ? 'bold' : 'normal')}"></text>
      <rect x="1400" y="275" width="100" height="50" rx="5" ry="5" fill="#FFFFFF" style="opacity: 0.9" />
      <text x='1450' y="310" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: tank3.value() + '%', style: {'font-weight': (tank3.value() >= 100.0 ? 'bold' : 'normal')}"></text>
      <rect x="1600" y="275" width="100" height="50" rx="5" ry="5" fill="#FFFFFF" style="opacity: 0.9" />
      <text x='1650' y="310" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: tank4.value() + '%', style: {'font-weight': (tank4.value() >= 100.0 ? 'bold' : 'normal')}"></text>

      <!-- Valves under tanks 1-4: respond to mouse events -->

      <svg x="000" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-left-valve', data: valve1 }, event: {mouseover : onMouseOver, mouseout: onMouseOut}" id="valve1" />
      <svg x="100" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-left-tway', data: valve1Fill }" />
      <svg x="300" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-right-tway', data: valve2Fill }" />
      <svg x="400" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-right-valve', data: valve2 }, event: {mouseover : onMouseOver, mouseout: onMouseOut}" id="valve2" />
      <svg x="1300" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-left-valve', data: valve3 }, event: {mouseover : onMouseOver, mouseout: onMouseOut}" id="valve3" />
      <svg x="1400" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-left-tway', data: valve3Fill }" />
      <svg x="1600" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-right-tway', data: valve4Fill }" />
      <svg x="1700" y="500" width="100" height="100" data-bind="template: { name: 'plumbing-right-valve', data: valve4 }, event: {mouseover : onMouseOver, mouseout: onMouseOut}" id="valve4" />

      <!-- Lines between intake and mixing tanks -->

      <svg x="100" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-right-top-elbow', data: leftLine }" />
      <svg x="200" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: leftLine }" />
      <svg x="300" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-top-tway', data: leftLine }" />
      <svg x="400" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: leftLine }" />
      <svg x="500" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: leftLine }" />

      <svg x="800" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="900" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="1000" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="1100" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="1200" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="1300" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="1400" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-top-tway', data: rightLine }" />
      <svg x="1500" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightLine }" />
      <svg x="1600" y="600" width="100" height="100" data-bind="template: { name: 'plumbing-left-top-elbow', data: rightLine }" />

      <!-- Pumps -->

      <svg x="525" y="625" width="150" height="150" data-bind="template: { name: 'plumbing-pump', data: leftPump }" class="pump"/>
      <text x='600' y="600" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: leftPump.value() > 0 ? parseFloat(leftPump.value()).toFixed(1) + ' rpm' : 'PUMP OFF'"></text>
      <svg x="725" y="625" width="150" height="150" data-bind="template: { name: 'plumbing-pump', data: rightPump }" class="pump" />
      <text x='800' y="600" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: rightPump.value() > 0 ? parseFloat(rightPump.value()).toFixed(1) + ' rpm' : 'PUMP OFF'"></text>

      <!-- Auto valves -->

      <svg x="600" y="700" width="100" height="100" data-bind="template: { name: 'plumbing-pipe-end-bottom', data: leftAutoValveFill }" />
      <svg x="700" y="700" width="100" height="100" data-bind="template: { name: 'plumbing-pipe-end-bottom', data: rightAutoValveFill }" />
      <svg x="600" y="850" width="100" height="100" data-bind="template: { name: 'plumbing-vertical-pipe', data: leftAutoValveFill }" />
      <svg x="600" y="800" width="100" height="100" data-bind="template: { name: 'plumbing-left-tway', data: leftAutoValveFill }" />
      <svg x="600" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-right-top-elbow', data: leftAutoValveFill }" />
      <svg x="700" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: leftAutoValveFill }" />
      <svg x="800" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: leftAutoValveFill }" />
      <svg x="900" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: leftAutoValveFill }" />

      <svg x="700" y="800" width="100" height="100" data-bind="template: { name: 'plumbing-right-tway', data: rightAutoValveFill }" />
      <svg x="500" y="800" width="100" height="100" data-bind="template: { name: 'plumbing-left-valve', data: leftAutoValve }" />
      <svg x="800" y="800" width="100" height="100" data-bind="template: { name: 'plumbing-right-valve', data: rightAutoValve }" />
      <svg x="700" y="900" width="100" height="100" data-bind="template: { name: 'plumbing-right-top-elbow', data: rightAutoValveFill }" />
      <svg x="800" y="900" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightAutoValveFill }" />
      <svg x="900" y="900" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: rightAutoValveFill }" />

      <!-- Drainage -->

      <svg x="1400" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: drainFill }" />
      <svg x="1500" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-top-tway', data: drainFill }" />
      <svg x="1500" y="850" width="100" height="100" data-bind="template: { name: 'plumbing-top-valve', data: drainAutoValve }" />
      <svg x="1600" y="950" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: drainFill }" />
      <svg x="1600" y="875" width="150" height="150" data-bind="template: { name: 'plumbing-pump', data: drainPump }" class="pump" />
      <text x="1675" y="860" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont" data-bind="text: drainPump.value() > 0 ? parseFloat(drainPump.value()).toFixed(1) + ' rpm' : 'PUMP OFF'"></text>
      <svg x="1700" y="850" width="100" height="100" data-bind="template: { name: 'plumbing-pipe-end-right', data: drainFill }" />
      <svg x="1800" y="850" width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-pipe', data: drainFill }" />

      <!-- Mixing tank -->

      <svg x="900" y="750">
        <g transform="scale(6,3)">
          <svg width="100" height="100" data-bind="template: { name: 'plumbing-horizontal-tank'} " class="tank" />
          <svg width="100" height="100" data-bind="template: { name: 'plumbing-cutaway', data: mixingTankFill} " class="tank-cutaway" />
          <svg x="25" y="20" height="60" width="12" data-bind="template: { name: 'plumbing-horizontal-rotor', data: mixingTankSpeed} " opacity="0.5" />
          <svg x="37" y="20" height="60" width="12" data-bind="template: { name: 'plumbing-horizontal-rotor', data: mixingTankSpeed} " opacity="0.5" />
          <svg x="49" y="20" height="60" width="12" data-bind="template: { name: 'plumbing-horizontal-rotor', data: mixingTankSpeed} " opacity="0.5" />
          <svg x="61" y="20" height="60" width="12" data-bind="template: { name: 'plumbing-horizontal-rotor', data: mixingTankSpeed} " opacity="0.5" />
        </g>
      </svg>

        <!-- Mixing tank panel -->

        <svg x="1050" y="800" width="300" height="140">
        <rect width="100%" height="100%" rx="5" ry="5" fill="#FFFFFF" style="opacity: 0.6" />
        <text x='290' y="30" text-anchor="end" dominant-baseline="alphabetic" class="normalFont" data-bind="text: 'Fill (%): ' + parseFloat(mixingTankFill.value()).toFixed(1)"></text>
        <text x='290' y="60" text-anchor="end" dominant-baseline="alphabetic" class="normalFont" data-bind="text: 'Rotor speed (rpm): ' + parseFloat(mixingTankSpeed.value()).toFixed(0)"></text>
        <text x='290' y="90" text-anchor="end" dominant-baseline="alphabetic" class="normalFont" data-bind="text: 'Mixing phase: ' + parseFloat(mixingPhase.value()).toFixed(0)"></text>
        <text x='290' y="120" text-anchor="end" dominant-baseline="alphabetic" class="normalFont" data-bind="text: mixingPhaseTitle.value()"></text>
        <rect id="mixingTankPanel" width="100%" height="100%" style="opacity: 0" />
      </svg>

        <!-- Rotor speed override panel -->

        <svg id="rotorSpeedPanel" x="1050" y="800" width="300" height="140" visibility="hidden">
        <rect width="100%" height="100%" rx="5" ry="5" fill="#FFFFFF" style="opacity: 0.9" />
        <text x='150' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">Override rotor speed:</text>

        <svg id="rotorSpeed10" x="5" y="40" width="90" height="40">
          <rect width="100%" height="100%" rx="5" ry="5" fill="#D0D0D0" />
          <text x='45' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">10 rpm</text>
        </svg>
        <svg id="rotorSpeed30" x="105" y="40" width="90" height="40">
          <rect width="100%" height="100%" rx="5" ry="5" fill="#D0D0D0" />
          <text x='45' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">30 rpm</text>
        </svg>
        <svg id="rotorSpeed50" x="205" y="40" width="90" height="40">
          <rect width="100%" height="100%" rx="5" ry="5" fill="#D0D0D0" />
          <text x='45' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">50 rpm</text>
        </svg>
        <svg id="rotorSpeedCancel" x="5" y="90" width="290" height="40">
          <rect width="100%" height="100%" rx="5" ry="5" fill="#D0D0D0" />
          <text x='145' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">CANCEL</text>
        </svg>
        </svg>

        <!-- Hint panels -->

        <svg id="infoHeader" x="500" y="10" width="800" height="90">
        <rect width="100%" height="100%" stroke-width="0" rx="10" ry="10" fill="#E0E0E0" />
        <text x='400' y="46" text-anchor="middle" dominant-baseline="alphabetic" class="largeFont">CSWorks Pipes and Tanks Demo</text>
        <text x='400' y="70" text-anchor="middle" dominant-baseline="alphabetic" class="smallFont">Tap on this panel to display/hide hints</text>
      </svg>
        <g id="infoPanel" visibility="hidden">

            <svg x="600" y="110" width="600" height="60" opacity="0.9">
          <rect width="100%" height="100%" rx="10" ry="10" fill="#E0E0E0" />
          <text x='300' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">Tap on tanks to see tank fill trend</text>
        </svg>
            <path d="M880,150 L150,430" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M890,150 L350,430" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M910,150 L1450,430" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M920,150 L1650,430" stroke="#696969" stroke-width="2" stroke-linecap="round" />

            <svg x="600" y="310" width="600" height="60" opacity="0.9">
          <rect width="100%" height="100%" rx="10" ry="10" fill="#E0E0E0" />
          <text x='300' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">Tap on valves to open/close them</text>
        </svg>
            <path d="M880,350 L50,530" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M890,350 L450,530" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M910,350 L1350,530" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M920,350 L1750,530" stroke="#696969" stroke-width="2" stroke-linecap="round" />

            <svg x="600" y="480" width="600" height="60" opacity="0.9">
          <rect width="100%" height="100%" rx="10" ry="10" fill="#E0E0E0" />
          <text x='300' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">Tap on pumps to see pump RPM trend</text>
        </svg>
            <path d="M900,520 L600,700" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M920,520 L800,700" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M940,520 L1675,950" stroke="#696969" stroke-width="2" stroke-linecap="round" />

            <svg x="1200" y="680" width="600" height="60" opacity="0.9">
          <rect width="100%" height="100%" rx="10" ry="10" fill="#E0E0E0" />
          <text x='300' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">Tap on tank panel to override rotor speed</text>
        </svg>
            <path d="M1500,720 L1150,850" stroke="#696969" stroke-width="2" stroke-linecap="round" />

            <svg x="0" y="990" width="600" height="80" opacity="0.9">
          <rect width="100%" height="100%" rx="10" ry="10" fill="#E0E0E0" />
          <text x='300' y="30" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">Pumps and mixing valves turn on and off</text>
          <text x='300' y="60" text-anchor="middle" dominant-baseline="alphabetic" class="normalFont">automatically and cannot be overridden</text>
        </svg>
            <path d="M550,1020 L550,870" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M560,1020 L580,700" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M570,1020 L780,700" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M580,1020 L850,870" stroke="#696969" stroke-width="2" stroke-linecap="round" />

            <path d="M580,1030 L1520,910" stroke="#696969" stroke-width="2" stroke-linecap="round" />
            <path d="M580,1040 L1670,960" stroke="#696969" stroke-width="2" stroke-linecap="round" />
        </g>

        <!-- Message string -->
        <text id="errorMsg" x='0' y="1060" text-anchor="start" dominant-baseline="alphabetic" class="errorFont"></text>
        </svg>
        <div style="display: block;position:absolute;top:0;width:100%; text-align: center; margin-top:8px;pointer-events:none;">
            <div id="tank_trend_panel" class="round-corners" style="display:block; pointer-events:all; width: 800px;
      height: 400px; margin: 0 auto 0 auto; opacity: 0.9; background: #f0f0f0; padding: 12px 5px 0px 5px;">
                <span style="font-size: 24px;">Tank live trends</span>
                <a onclick="javascript:$('#tank_trend_panel').slideUp('fast');" style="font-size: 14px;float:right;margin-right:4px;cursor:pointer;">CLOSE</a>
                <div id="tank_trend_container" style="display: block; width: 800px; height: 380px;">
                </div>
            </div>
            <div id="pump_trend_panel" class="round-corners" style="display: block; pointer-events:all; width: 800px;
      height: 400px; margin: 0 auto 0 auto; opacity: 0.9; background: #f0f0f0; padding: 12px 5px 0px 5px;">
                <span style="font-size: 24px;">Pump live trends</span>
                <a onclick="javascript:$('#pump_trend_panel').slideUp('fast');" style="font-size: 14px;float:right;margin-right:4px;cursor:pointer;">CLOSE</a>
                <div id="pump_trend_container" style="display: block; width: 800px; height: 380px;">
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function dataManagerUpdateHandler(responseItems) {
            //console.log(typeof g_vm.leftPump.value() + " " + g_vm.leftPump.value());
            document.getElementById("errorMsg").textContent = "";
            if (responseItems.length > 0) {
                var isTankDataAdded = false,
                    isPumpDataAdded = false;
                var maxT = 0;
                for (i = 0; i < responseItems.length; i++) {
                    var ri = responseItems[i];

                    // Check item status
                    if (ri.ItemStatus != 1 && ri.ItemStatus != 2) {
                        continue;
                    }

                    // Timestamps come as "\/Date(12345789-0700)\/" where 12345789 is the UTC milleseconds from 1970.
                    var tsServer = moment(parseInt(ri.Timestamp.substr(6))).zone(ri.Timestamp.substr(6));
                    var t = (tsServer.unix() - tsServer.zone() * 60) * 1000;
                    if (t > maxT) {
                        maxT = t;
                    }

                    // Check if this is one of the tank trends
                    for (var keyIdx = 0; keyIdx < g_tankTrendKeys.length; keyIdx++) {
                        if (ri.Id == g_tankTrendKeys[keyIdx]) {
                            addPointToTrendData(g_tankTrendData, ri, t);
                            isTankDataAdded = true;
                        }
                    } // for each tank

                    // Check if this is one of the pump trends
                    for (var keyIdx = 0; keyIdx < g_pumpTrendKeys.length; keyIdx++) {
                        if (ri.Id == g_pumpTrendKeys[keyIdx]) {
                            addPointToTrendData(g_pumpTrendData, ri, t);
                            isPumpDataAdded = true;
                        }
                    } // for each pump
                } // for each response item

                // Remove obsolete points
                var trendSpan = 60000;
                var lastTankIndexToRemove = removePointsFromTrendData(g_tankTrendData, trendSpan, maxT);
                var lastPumpIndexToRemove = removePointsFromTrendData(g_pumpTrendData, trendSpan, maxT);

                // Update trends if either new data available or old point removed
                if (lastTankIndexToRemove >= 0 || isTankDataAdded)
                    g_tankTrend.setData(g_tankTrendData);

                if (lastPumpIndexToRemove >= 0 || isPumpDataAdded)
                    g_pumpTrend.setData(g_pumpTrendData);
            }
        }

        function dataManagerErrorHandler(data, httpStatus) {
            document.getElementById("errorMsg").textContent = data;
        }

        // Add point to trend data, consolidate points if needed
        function addPointToTrendData(trendData, ri, responseItemDate) {
            // Check if there is a tank trend point with this exactly date already (it probably the last one)
            var pt = null;
            var lastPt = (trendData.length > 0 ? trendData[trendData.length - 1] : null);
            if (lastPt != null && lastPt.date == responseItemDate) {
                // Consolidate into single point to help Morris display it as a single point
                pt = lastPt;
            } else {
                // Create a new pt
                pt = {
                    date: responseItemDate
                };
                trendData.push(pt);
            }
            pt[ri.Id] = ri.Value.DoubleValue;
        }

        // Remove points that are older than specified timespan. Do not leave the array empty though.
        function removePointsFromTrendData(trendData, trendSpan, maxT) {
            var lastTankIndexToRemove = -1
            for (i = 0; i < trendData.length; i++) {
                if (trendData[i].date < maxT - trendSpan && i < trendData.length) {
                    lastTankIndexToRemove = i;
                }
            }
            if (lastTankIndexToRemove >= 0) {
                trendData.splice(0, lastTankIndexToRemove + 1);
            }
            return lastTankIndexToRemove;
        }

        // Global variable: knockout view model
        // ATTENTION: everytime you change the data item set please change data manager id below, otherwise data manager will keep pulling old set and you will not get the data for newly added/changed data items.
        function MyViewModel() {
            this.intake1 = new $.csworks_core.BoolDataItem("a00d357f-bcaa-4041-b637-11dd925fbc5f", "OpcDemo", "regularBoolTag", "tagIndex=01;");
            this.intake2 = new $.csworks_core.BoolDataItem("1b07f19c-6bb3-48ff-a137-592714294461", "OpcDemo", "regularBoolTag", "tagIndex=02;");
            this.intake3 = new $.csworks_core.BoolDataItem("8f0f16d9-c7f8-4113-b019-a0d44a8822d0", "OpcDemo", "regularBoolTag", "tagIndex=03;");
            this.intake4 = new $.csworks_core.BoolDataItem("da394ce8-3dc2-472f-b16e-2616d5979900", "OpcDemo", "regularBoolTag", "tagIndex=04;");
            this.tank1 = new $.csworks_core.FloatDataItem("c29119d3-5e8b-4d72-b886-4dfc970debb0", "OpcDemo", "regularDoubleTag", "tagIndex=01;", 0);
            this.tank2 = new $.csworks_core.FloatDataItem("7f536f9f-03fd-443b-939f-d3b1abbb1853", "OpcDemo", "regularDoubleTag", "tagIndex=02;", 0);
            this.tank3 = new $.csworks_core.FloatDataItem("452cf714-2c37-4361-888f-5c8cb0b20f1d", "OpcDemo", "regularDoubleTag", "tagIndex=03;", 0);
            this.tank4 = new $.csworks_core.FloatDataItem("a7413a09-b863-4750-a174-775091dc646a", "OpcDemo", "regularDoubleTag", "tagIndex=04;", 0);
            this.valve1 = new $.csworks_core.BoolDataItem("123867dd-56e8-42b4-abc8-d561d75073f3", "OpcDemo", "regularBoolTag", "tagIndex=05;");
            this.valve2 = new $.csworks_core.BoolDataItem("dcd3a543-fac1-4a80-811c-427ecb2de163", "OpcDemo", "regularBoolTag", "tagIndex=06;");
            this.valve3 = new $.csworks_core.BoolDataItem("9162a414-b6e2-4818-b19b-cc762bce7d28", "OpcDemo", "regularBoolTag", "tagIndex=07;");
            this.valve4 = new $.csworks_core.BoolDataItem("df9de481-56bc-44d6-a7e2-dbdc254a1b72", "OpcDemo", "regularBoolTag", "tagIndex=08;");
            this.valve1Fill = new $.csworks_core.BoolDataItem("a90496ba-3191-40e9-b50f-dd3e37a43c90", "OpcDemo", "regularBoolTag", "tagIndex=09;");
            this.valve2Fill = new $.csworks_core.BoolDataItem("f13cd4c7-296a-4791-9fbf-2fb7d291ea56", "OpcDemo", "regularBoolTag", "tagIndex=10;");
            this.valve3Fill = new $.csworks_core.BoolDataItem("09325242-0877-4cb7-a186-bc193fc3cfc7", "OpcDemo", "regularBoolTag", "tagIndex=11;");
            this.valve4Fill = new $.csworks_core.BoolDataItem("e3e6cb78-1bb5-40ad-bdda-5ff6a361d390", "OpcDemo", "regularBoolTag", "tagIndex=12;");
            this.leftLine = new $.csworks_core.BoolDataItem("441062d0-089b-4d49-8a15-6e3d28479567", "OpcDemo", "regularBoolTag", "tagIndex=13;");
            this.rightLine = new $.csworks_core.BoolDataItem("3cd0d353-021d-4ed3-a377-7013a0dd94a1", "OpcDemo", "regularBoolTag", "tagIndex=14;");
            this.leftPump = new $.csworks_core.FloatDataItem("593fcbbc-b4c9-43cb-a37b-44751720f188", "OpcDemo", "regularDoubleTag", "tagIndex=08;", 1);
            this.rightPump = new $.csworks_core.FloatDataItem("4181700a-7f28-43fd-8a1f-f7874804c71d", "OpcDemo", "regularDoubleTag", "tagIndex=09;", 1);
            this.leftAutoValve = new $.csworks_core.BoolDataItem("bce44eb6-f18c-4aaa-abdc-31cb0ff06af1", "OpcDemo", "regularBoolTag", "tagIndex=15;");
            this.rightAutoValve = new $.csworks_core.BoolDataItem("7ce13f51-d6ce-44ef-a03b-9ee5859ae40e", "OpcDemo", "regularBoolTag", "tagIndex=16;");
            this.leftAutoValveFill = new $.csworks_core.BoolDataItem("0a893c4b-7b91-4706-a0a5-d343bfd8e40b", "OpcDemo", "regularBoolTag", "tagIndex=17;");
            this.rightAutoValveFill = new $.csworks_core.BoolDataItem("435de601-e389-4b13-80b0-03bd15421fda", "OpcDemo", "regularBoolTag", "tagIndex=18;");
            this.mixingTankFill = new $.csworks_core.FloatDataItem("fa689180-c686-45f9-bc5f-04a98faabed9", "OpcDemo", "regularDoubleTag", "tagIndex=05;", 1);
            this.mixingTankSpeed = new $.csworks_core.FloatDataItem("3d72740c-a1fb-4b80-a628-caa1ae15bbe3", "OpcDemo", "regularDoubleTag", "tagIndex=06;", 1);
            this.mixingPhase = new $.csworks_core.FloatDataItem("63e9a601-30f9-448f-b284-2fd4faa278e0", "OpcDemo", "regularDoubleTag", "tagIndex=07;", 0);
            this.mixingPhaseTitle = new $.csworks_core.StringDataItem("60b66445-b047-42bd-b498-3bad6dbb9d59", "OpcDemo", "regularStringTag", "tagIndex=01;");
            this.drainAutoValve = new $.csworks_core.BoolDataItem("50be71ad-7206-44dc-add6-668ac4f28a11", "OpcDemo", "regularBoolTag", "tagIndex=19;");
            this.drainFill = new $.csworks_core.BoolDataItem("13d2a3d0-cdb1-4538-8af6-6886337472d5", "OpcDemo", "regularBoolTag", "tagIndex=20;");
            this.drainPump = new $.csworks_core.FloatDataItem("c951cd96-545a-47b3-a72c-f769752600af", "OpcDemo", "regularDoubleTag", "tagIndex=10;", 1);

            // Static items: for UI purposes only, no bound data
            this.staticRedTank = {};

            // Customize appearance

            // Rusty hot water pipes and tanks
            this.rightAutoValve.bodyColor = this.rightAutoValveFill.bodyColor = this.rightAutoValve.bodyColor = this.rightPump.bodyColor = this.staticRedTank.bodyColor = this.valve3.bodyColor = this.valve4.bodyColor = this.intake3.bodyColor = this.intake4.bodyColor = this.tank3.bodyColor = this.tank4.bodyColor = this.rightLine.bodyColor = this.valve3Fill.bodyColor = this.valve4Fill.bodyColor = ko.observable("#732E12");
            this.rightAutoValve.bodyColorLight = this.rightAutoValveFill.bodyColorLight = this.rightAutoValve.boyColorLight = this.rightPump.bodyColorLight = this.staticRedTank.bodyColorLight = this.valve3.bodyColorLight = this.valve4.bodyColorLight = this.intake3.bodyColorLight = this.intake4.bodyColorLight = this.tank3.bodyColorLight = this.tank4.bodyColorLight = this.rightLine.bodyColorLight = this.valve3Fill.bodyColorLight = this.valve4Fill.bodyColorLight = ko.observable("#E3A891");

            // Hot water (red)
            this.rightAutoValveFill.fillColor = this.rightPump.fillColor = this.intake3.fillColor = this.intake4.fillColor = this.tank3.fillColor = this.tank4.fillColor = this.valve3Fill.fillColor = this.valve4Fill.fillColor = this.rightLine.fillColor = ko.observable("#FF0000");
            this.rightAutoValveFill.fillColorLight = this.rightPump.fillColorLight = this.intake3.fillColorLight = this.intake4.fillColorLight = this.tank3.fillColorLight = this.tank4.fillColorLight = this.valve3Fill.fillColorLight = this.valve4Fill.fillColorLight = this.rightLine.fillColorLight = ko.observable("#FFA0A0");

            // Mixing tank liquid color
            this.drainFill.fillColor = this.drainPump.fillColor = this.mixingTankFill.fillColor = ko.observable("#BB00FF");
            this.drainFill.fillColorLight = this.drainPump.fillColorLight = this.mixingTankFill.fillColorLight = ko.observable("#E7A6FF");

            // Mouse over/out event handlers for interactive elements
            this.onMouseOver = function(vm, event) {
                var dataItem = ko.dataFor(event.target);
                if (dataItem != null && !dataItem.hasFocus()) {
                    dataItem.hasFocus(true);
                }
            };

            this.onMouseOut = function(vm, event) {
                var dataItem = ko.dataFor(event.target);
                if (dataItem != null && dataItem.hasFocus()) {
                    dataItem.hasFocus(false);
                }
            };
        }
        var g_vm = new MyViewModel();

        // Global variable: CSWorks data manager. Change the guid when making changes to the data item set (see above).
        var g_dm = new $.csworks_core.LiveDataManager("3ab33373-f17a-462e-b6bd-2d4c338fdef2", 250, 5000, "/CSWorksRest/LiveData", dataManagerUpdateHandler, dataManagerErrorHandler);

        // Tell data manager about data items
        g_dm.addDataItem(g_vm.intake1);
        g_dm.addDataItem(g_vm.intake2);
        g_dm.addDataItem(g_vm.intake3);
        g_dm.addDataItem(g_vm.intake4);
        g_dm.addDataItem(g_vm.tank1);
        g_dm.addDataItem(g_vm.tank2);
        g_dm.addDataItem(g_vm.tank3);
        g_dm.addDataItem(g_vm.tank4);
        g_dm.addDataItem(g_vm.valve1);
        g_dm.addDataItem(g_vm.valve2);
        g_dm.addDataItem(g_vm.valve3);
        g_dm.addDataItem(g_vm.valve4);
        g_dm.addDataItem(g_vm.valve1Fill);
        g_dm.addDataItem(g_vm.valve2Fill);
        g_dm.addDataItem(g_vm.valve3Fill);
        g_dm.addDataItem(g_vm.valve4Fill);
        g_dm.addDataItem(g_vm.leftLine);
        g_dm.addDataItem(g_vm.rightLine);
        g_dm.addDataItem(g_vm.leftPump);
        g_dm.addDataItem(g_vm.rightPump);
        g_dm.addDataItem(g_vm.leftAutoValve);
        g_dm.addDataItem(g_vm.rightAutoValve);
        g_dm.addDataItem(g_vm.leftAutoValveFill);
        g_dm.addDataItem(g_vm.rightAutoValveFill);
        g_dm.addDataItem(g_vm.mixingTankFill);
        g_dm.addDataItem(g_vm.mixingTankSpeed);
        g_dm.addDataItem(g_vm.mixingPhase);
        g_dm.addDataItem(g_vm.mixingPhaseTitle);
        g_dm.addDataItem(g_vm.drainAutoValve);
        g_dm.addDataItem(g_vm.drainFill);
        g_dm.addDataItem(g_vm.drainPump);

        // Let's get started
        ko.applyBindings(g_vm);
        g_dm.start();
    </script>
    <!-- Custom code to handle clicks on interactive controls -->
    <script type="text/javascript">
        $(".tank").on("click", function() {
            $("#pump_trend_panel").slideUp('fast', function() {
                $("#tank_trend_panel").slideDown('fast');
            });
        });

        $(".pump").on("click", function() {
            $("#tank_trend_panel").slideUp('fast', function() {
                $("#pump_trend_panel").slideDown('fast');
            });
        });

        $("#valve1").on("click", function() {
            g_vm.valve1.writeValue(!g_vm.valve1.value());
        });
        $("#valve2").on("click", function() {
            g_vm.valve2.writeValue(!g_vm.valve2.value());
        });
        $("#valve3").on("click", function() {
            g_vm.valve3.writeValue(!g_vm.valve3.value());
        });
        $("#valve4").on("click", function() {
            g_vm.valve4.writeValue(!g_vm.valve4.value());
        });
    </script>
    <!-- Custom code to handle rotor speed controls -->
    <script type="text/javascript">
        $("#mixingTankPanel").on("click", function(e) {
            $("#rotorSpeedPanel")[0].setAttribute("visibility", "visible");
        });

        $("#rotorSpeed10").click(function() {
            g_vm.mixingTankSpeed.writeValue(10.0);
            $("#rotorSpeedPanel")[0].setAttribute("visibility", "hidden");
        });
        $("#rotorSpeed30").click(function() {
            g_vm.mixingTankSpeed.writeValue(30.0);
            $("#rotorSpeedPanel")[0].setAttribute("visibility", "hidden");
        });
        $("#rotorSpeed50").click(function() {
            g_vm.mixingTankSpeed.writeValue(50.0);
            $("#rotorSpeedPanel")[0].setAttribute("visibility", "hidden");
        });
        $("#rotorSpeedCancel").click(function() {
            $("#rotorSpeedPanel")[0].setAttribute("visibility", "hidden");
        });
    </script>
    <!-- Custom code to handle tip panels -->
    <script type="text/javascript">
        $("#infoHeader").click(function(e) {
            var infoPanel = $("#infoPanel")[0];
            if (infoPanel.getAttribute("visibility") === "hidden") {
                infoPanel.setAttribute("visibility", "visible");
            } else {
                infoPanel.setAttribute("visibility", "hidden");
            }
            e.preventDefault();
        });
    </script>
    <!-- Custom code to create trends -->
    <script type="text/javascript">
        var g_tankTrendData = [];
        var g_tankTrendKeys = [
            "c29119d3-5e8b-4d72-b886-4dfc970debb0",
            "7f536f9f-03fd-443b-939f-d3b1abbb1853",
            "452cf714-2c37-4361-888f-5c8cb0b20f1d",
            "a7413a09-b863-4750-a174-775091dc646a",
            "fa689180-c686-45f9-bc5f-04a98faabed9"
        ];

        var g_tankTrend = new Morris.Line({
            element: 'tank_trend_container',
            data: g_tankTrendData,
            xkey: 'date',
            ykeys: g_tankTrendKeys,
            labels: ['Tank 1', 'Tank 2', 'Tank 3', 'Tank 4', 'Mixing Tank'],
            lineColors: ['#0000C0', '#0000FF', '#FF0000', '#C00000', '#BB00FF'],
            yLabelFormat: function(y) {
                return y.toFixed(0) + '%';
            },
            xLabels: "5Sec",
            dateFormat: function(x) {
                return moment(x).format("HH:mm:ss.SSS");
            }
        });

        var g_pumpTrendData = [];
        var g_pumpTrendKeys = [
            "593fcbbc-b4c9-43cb-a37b-44751720f188",
            "4181700a-7f28-43fd-8a1f-f7874804c71d",
            "c951cd96-545a-47b3-a72c-f769752600af"
        ];

        var g_pumpTrend = new Morris.Line({
            element: 'pump_trend_container',
            data: g_pumpTrendData,
            xkey: 'date',
            ykeys: g_pumpTrendKeys,
            labels: ['Left pump', 'Right pump', 'Drain pump'],
            lineColors: ['#0000D0', '#FF0000', '#732E12'],
            yLabelFormat: function(y) {
                return y.toFixed(0) + ' rpm';
            },
            xLabels: "5Sec",
            dateFormat: function(x) {
                return moment(x).format("HH:mm:ss.SSS");
            }
        });

        javascript: $('#tank_trend_panel').hide();
        javascript: $('#pump_trend_panel').hide();
    </script>
</body>

</html>
